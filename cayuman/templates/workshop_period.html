<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <title>{{wp.workshop.name}} {{wp.period.date_start}} - {{wp.period.date_end}} | Cayuman</title>

  </head>
  <body>
    <div class="container-md">

      <div class="row">

        <div class="col-8">
          <p class="display-6 text-uppercase">Taller</p>
        </div>

        <div class="col-4 alert alert-success">
          <h5 class="alert-heading text-uppercase">{{wp.count_classes}} sesiones</h3>
        </div>

      </div>

      <div>
        <h1 class="display-1 text-uppercase text-primary">{{wp.workshop.name}}</h1>
        <h3 class="text-uppercase text-secondary">Gu&iacute;a: <span>{{wp.teacher.name}}</span></h3>
        <h4>{{wp.period.date_start | date('j \d\e F \d\e Y')}} - {{wp.period.date_end | date('j \d\e F \d\e Y')}}</h4>
        <p>{{wp.workshop.description}}</p>
      </div>
      <div>

        <table class="table caption-top table-bordered">
          <caption>Horario</caption>
          <thead>
            <tr >
              <th scope="col">Hora</th>
              {% for day in days %}
                <th scope="col">{{ day.1 }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for block in blocks %}
            <tr>
                <td scope="row">{{ block.0.strftime('%H:%M') }} - {{ block.1.strftime('%H:%M') }}</td>
                {% for sched in schedules %}
                    {% if sched.time_start == block.0 %}
                        {% set ns = namespace(seen=false) %}
                        {% for wp_sched in wp.schedules.all() %}
                            {% if wp_sched == sched %}
                                <td class="table-primary">
                                  <div class="d-flex justify-content-center align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                      <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
                                    </svg>
                                  </div>
                                </td>
                                {% set ns.seen = true %}
                            {% endif %}
                        {% endfor %}
                        {% if not ns.seen %}
                            <td></td>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
